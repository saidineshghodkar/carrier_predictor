<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free career guidance tool for students - No data collection, works offline">
    <meta name="author" content="Student Career Advisor">
    <title>Career Stream Finder - Free Student Tool</title>
    
    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* RESET & BASE */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #f8fafc; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; 
            color: #1e293b;
            line-height: 1.6;
        }
        
        /* CONTAINERS */
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
        
        /* HEADER */
        .header {
            background: linear-gradient(135deg, #2563eb, #4f46e5);
            color: white;
            text-align: center;
            padding: 40px 20px;
            border-radius: 16px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .header h1 { font-size: 2.2rem; margin-bottom: 10px; }
        .header p { font-size: 1.1rem; opacity: 0.9; max-width: 600px; margin: 0 auto; }
        
        /* CARDS */
        .card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
        }
        
        /* PROGRESS */
        .progress-bar {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #10b981;
            width: 0%;
            transition: width 0.5s;
        }
        
        /* TIMER */
        .timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            color: #ef4444;
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid #fee2e2;
            display: none;
            z-index: 1000;
        }
        
        /* QUESTIONS */
        .question-card { margin-bottom: 20px; }
        .question-text { 
            font-size: 1.3rem; 
            font-weight: 600; 
            margin-bottom: 25px; 
            color: #1e293b;
        }
        .options-grid { display: grid; gap: 12px; }
        .option {
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.2s;
        }
        .option:hover { border-color: #2563eb; background: #eff6ff; }
        .option.selected { 
            border-color: #2563eb; 
            background: #eff6ff; 
            outline: 2px solid #2563eb;
        }
        .option-circle {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid #cbd5e1;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .option.selected .option-circle {
            background: #2563eb;
            border-color: #2563eb;
            color: white;
        }
        
        /* SLIDERS */
        .slider-container { margin: 30px 0; padding: 0 10px; }
        .slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: #e2e8f0;
            border-radius: 4px;
            outline: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        .slider-value {
            text-align: center;
            font-size: 1.8rem;
            font-weight: bold;
            color: #2563eb;
            margin-bottom: 10px;
        }
        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #64748b;
            margin-top: 10px;
        }
        
        /* BUTTONS */
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            font-size: 1rem;
        }
        .btn-primary {
            background: #2563eb;
            color: white;
        }
        .btn-primary:hover {
            background: #1e40af;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.2);
        }
        .btn-outline {
            background: transparent;
            border: 2px solid #64748b;
            color: #64748b;
        }
        .btn-outline:hover {
            border-color: #2563eb;
            color: #2563eb;
        }
        .btn-full { width: 100%; justify-content: center; }
        
        /* DASHBOARD */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .result-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e2e8f0;
        }
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            background: #e0e7ff;
            color: #2563eb;
            margin: 0 5px 5px 0;
        }
        
        /* ROADMAP */
        .roadmap-step {
            position: relative;
            padding-left: 40px;
            padding-bottom: 30px;
            border-left: 3px solid #e2e8f0;
        }
        .roadmap-step:last-child {
            border-left: 3px solid transparent;
            padding-bottom: 0;
        }
        .roadmap-step::before {
            content: '';
            position: absolute;
            left: -11px;
            top: 0;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 4px solid #2563eb;
        }
        
        /* CHATBOT */
        .chatbot {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 999;
        }
        .chat-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #2563eb;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
            border: none;
        }
        .chat-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            display: none;
            flex-direction: column;
            border: 1px solid #e2e8f0;
        }
        .chat-header {
            padding: 15px;
            background: #2563eb;
            color: white;
            font-weight: bold;
            border-radius: 16px 16px 0 0;
        }
        .chat-body {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background: #f8fafc;
        }
        .message {
            padding: 10px 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            max-width: 85%;
            font-size: 0.95rem;
        }
        .bot-message {
            background: white;
            border: 1px solid #e2e8f0;
            align-self: flex-start;
        }
        .user-message {
            background: #2563eb;
            color: white;
            align-self: flex-end;
            margin-left: auto;
        }
        .chat-input {
            padding: 15px;
            border-top: 1px solid #e2e8f0;
            display: flex;
            gap: 10px;
            background: white;
        }
        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            outline: none;
        }
        
        /* UTILITIES */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .flex-center { display: flex; align-items: center; justify-content: center; }
        .gap-10 { gap: 10px; }
        .mb-20 { margin-bottom: 20px; }
        .mt-30 { margin-top: 30px; }
        
        /* LOADING */
        .loading {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .card { padding: 20px; }
            .header { padding: 30px 15px; }
            .header h1 { font-size: 1.8rem; }
            .chat-window {
                width: 300px;
                right: 10px;
            }
            .timer {
                top: 10px;
                right: 10px;
                padding: 8px 15px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>

<!-- Timer -->
<div class="timer" id="timer">
    <i class="far fa-clock"></i> <span id="time">10:00</span>
</div>

<div class="container">
    
    <!-- WELCOME SCREEN -->
    <div id="welcome" class="card text-center">
        <i class="fas fa-graduation-cap" style="font-size: 60px; color: #2563eb; margin-bottom: 20px;"></i>
        <h2 style="margin-bottom: 15px;">Find Your Career Path</h2>
        <p style="color: #64748b; margin-bottom: 30px; max-width: 500px; margin: 0 auto 30px;">
            Free tool to help students choose the right stream after 10th grade. 
            No data collected - everything stays in your browser.
        </p>
        <div style="display: flex; gap: 15px; justify-content: center; margin-bottom: 30px; flex-wrap: wrap;">
            <div class="result-card">
                <strong>8 Questions</strong><br>
                <span style="font-size: 0.8rem; color: #64748b;">Quick assessment</span>
            </div>
            <div class="result-card">
                <strong>100% Free</strong><br>
                <span style="font-size: 0.8rem; color: #64748b;">No registration</span>
            </div>
            <div class="result-card">
                <strong>Local Processing</strong><br>
                <span style="font-size: 0.8rem; color: #64748b;">No data sent</span>
            </div>
        </div>
        <button id="startBtn" class="btn btn-primary" style="min-width: 200px;">
            Start Free Assessment <i class="fas fa-arrow-right"></i>
        </button>
        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e2e8f0;">
            <p style="font-size: 0.8rem; color: #64748b;">
                <i class="fas fa-lock"></i> All processing happens in your browser. No data is collected or stored.
            </p>
        </div>
    </div>
    
    <!-- ASSESSMENT SCREEN -->
    <div id="assessment" class="hidden">
        <div class="progress-bar">
            <div id="progress" class="progress-fill"></div>
        </div>
        
        <div class="card">
            <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                <span id="section" style="font-weight: bold; color: #2563eb; font-size: 0.85rem;">
                    SECTION 1: ACADEMICS
                </span>
                <span id="counter" style="color: #64748b; font-size: 0.9rem;">
                    Question 1/8
                </span>
            </div>
            
            <div id="questionContainer"></div>
            
            <div style="display: flex; justify-content: space-between; margin-top: 30px;">
                <button id="prevBtn" class="btn btn-outline" disabled>
                    <i class="fas fa-chevron-left"></i> Previous
                </button>
                <button id="nextBtn" class="btn btn-primary">
                    Next <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- LOADING SCREEN -->
    <div id="loading" class="card hidden text-center">
        <div style="padding: 40px;">
            <i class="fas fa-circle-notch loading" style="font-size: 50px; color: #2563eb; margin-bottom: 20px;"></i>
            <h3 style="margin-bottom: 15px;">Analyzing Your Responses</h3>
            <p id="loadingText" style="color: #64748b;">Processing your answers...</p>
            <div style="width: 200px; height: 4px; background: #e2e8f0; margin: 30px auto; border-radius: 2px; overflow: hidden;">
                <div id="loadingBar" style="height: 100%; background: #2563eb; width: 0%;"></div>
            </div>
        </div>
    </div>
    
    <!-- RESULTS SCREEN -->
    <div id="results" class="hidden">
        <div class="card" style="border-left: 5px solid #10b981;">
            <div style="display: flex; align-items: center; gap: 15px;">
                <div style="width: 50px; height: 50px; background: #10b981; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div>
                    <h2>Assessment Complete</h2>
                    <p style="color: #64748b;">Based on your responses, here are your suggested paths:</p>
                </div>
            </div>
        </div>
        
        <div class="dashboard-grid">
            <!-- MAIN RESULT -->
            <div class="card" style="grid-column: span 2;">
                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                    <div id="resultIcon" style="width: 50px; height: 50px; background: #2563eb; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;"></div>
                    <div>
                        <div style="font-size: 0.85rem; color: #64748b;">Top Suggestion</div>
                        <h2 id="resultTitle" style="margin: 0;">Engineering & Technology</h2>
                    </div>
                </div>
                <p id="resultDesc" style="color: #64748b; margin-bottom: 20px;"></p>
                <div id="resultTags"></div>
            </div>
            
            <!-- CHART -->
            <div class="card" style="height: 350px;">
                <canvas id="chart"></canvas>
            </div>
            
            <!-- ROADMAP -->
            <div class="card" style="grid-column: span 3;">
                <h3 style="margin-bottom: 20px;"><i class="fas fa-road" style="color: #f59e0b;"></i> Suggested Path</h3>
                <div id="roadmap"></div>
            </div>
            
            <!-- ALTERNATIVES -->
            <div class="card" style="grid-column: span 3;">
                <h3 style="margin-bottom: 20px;">Other Options to Consider</h3>
                <div id="alternatives" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px;"></div>
            </div>
        </div>
        
        <div class="text-center mt-30">
            <button id="retakeBtn" class="btn btn-outline">
                <i class="fas fa-redo"></i> Take Assessment Again
            </button>
            <button id="printBtn" class="btn btn-primary">
                <i class="fas fa-print"></i> Print Results
            </button>
        </div>
        
        <div style="margin-top: 30px; padding: 20px; background: #f1f5f9; border-radius: 12px;">
            <p style="font-size: 0.9rem; color: #64748b; text-align: center;">
                <strong>Note:</strong> This is an educational tool for guidance only. 
                Always consult with school counselors and parents before making academic decisions.
            </p>
        </div>
    </div>
</div>

<!-- CHATBOT -->
<div class="chatbot">
    <button class="chat-toggle" id="chatToggle">
        <i class="fas fa-comment"></i>
    </button>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            Study Assistant
            <span id="chatClose" style="float: right; cursor: pointer;">×</span>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="message bot-message">
                Hi! I can help explain different career paths and streams. 
                Ask me anything about education options.
            </div>
        </div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Ask about streams or careers...">
            <button id="chatSend" class="btn btn-primary" style="padding: 8px 15px;">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>
</div>

<script>
    // ==================== APP DATA ====================
    const careerData = {
        engineering: {
            name: "Engineering & Technology",
            desc: "Ideal for students strong in Mathematics and Physics who enjoy problem-solving and building things. Engineering offers diverse specializations and good career opportunities.",
            stream: "Science (Physics, Chemistry, Mathematics)",
            subjects: ["Mathematics", "Physics", "Chemistry", "Computer Science"],
            exams: ["JEE Main", "JEE Advanced", "State CETs"],
            colleges: ["IITs", "NITs", "State Engineering Colleges"],
            icon: "fas fa-cogs",
            color: "#2563eb"
        },
        medical: {
            name: "Medical & Healthcare",
            desc: "Perfect for students interested in Biology and Chemistry who want to help people. The medical field requires dedication but offers rewarding careers.",
            stream: "Science (Physics, Chemistry, Biology)",
            subjects: ["Biology", "Physics", "Chemistry"],
            exams: ["NEET"],
            colleges: ["AIIMS", "State Medical Colleges", "Private Medical Colleges"],
            icon: "fas fa-heartbeat",
            color: "#10b981"
        },
        commerce: {
            name: "Commerce & Business",
            desc: "Great for students interested in business, economics, and finance. Commerce opens doors to careers in accounting, finance, and management.",
            stream: "Commerce (Accountancy, Business Studies, Economics)",
            subjects: ["Accountancy", "Business Studies", "Economics", "Mathematics"],
            exams: ["CUET", "CA Foundation"],
            colleges: ["Delhi University", "SRCC", "Christ University"],
            icon: "fas fa-chart-line",
            color: "#f59e0b"
        },
        humanities: {
            name: "Humanities & Arts",
            desc: "For students interested in society, psychology, history, and creative fields. Humanities develops critical thinking and communication skills.",
            stream: "Humanities (History, Political Science, Psychology)",
            subjects: ["History", "Political Science", "Psychology", "Sociology"],
            exams: ["CUET", "CLAT"],
            colleges: ["Delhi University", "JNU", "Ashoka University"],
            icon: "fas fa-book",
            color: "#8b5cf6"
        },
        creative: {
            name: "Creative Arts & Design",
            desc: "Perfect for creative students interested in design, media, and visual arts. This path values originality and artistic expression.",
            stream: "Arts with Fine Arts/Design",
            subjects: ["Fine Arts", "Commercial Art", "Computer Graphics"],
            exams: ["NID DAT", "NIFT Entrance", "UCEED"],
            colleges: ["NID", "NIFT", "Architecture Colleges"],
            icon: "fas fa-palette",
            color: "#ec4899"
        },
        vocational: {
            name: "Vocational & Technical",
            desc: "For hands-on learners who prefer practical skills over theory. Vocational courses lead directly to specific careers and trades.",
            stream: "Vocational/ITI Courses",
            subjects: ["Trade-specific skills", "Practical training"],
            exams: ["State Entrance Tests"],
            colleges: ["ITIs", "Polytechnics", "Skill Centers"],
            icon: "fas fa-tools",
            color: "#64748b"
        }
    };

    const questions = [
        {
            id: 1,
            text: "What was your overall percentage in 10th standard?",
            type: "slider",
            min: 0,
            max: 100,
            value: 50,
            weights: {
                engineering: 30,
                medical: 30,
                commerce: 20,
                humanities: 15,
                creative: 10,
                vocational: 10
            }
        },
        {
            id: 2,
            text: "How would you rate your performance in Mathematics?",
            type: "slider",
            min: 0,
            max: 100,
            value: 50,
            weights: {
                engineering: 40,
                medical: 10,
                commerce: 30,
                humanities: 5,
                creative: 5,
                vocational: 20
            }
        },
        {
            id: 3,
            text: "How would you rate your performance in Science subjects?",
            type: "slider",
            min: 0,
            max: 100,
            value: 50,
            weights: {
                engineering: 30,
                medical: 40,
                commerce: 10,
                humanities: 10,
                creative: 10,
                vocational: 20
            }
        },
        {
            id: 4,
            text: "Which subjects do you enjoy the most?",
            type: "choice",
            options: [
                { text: "Mathematics and Science", weights: { engineering: 40, medical: 30 } },
                { text: "Social Studies and Languages", weights: { humanities: 40, commerce: 20 } },
                { text: "Arts and Creative subjects", weights: { creative: 50 } },
                { text: "Practical and Technical subjects", weights: { vocational: 50, engineering: 20 } }
            ]
        },
        {
            id: 5,
            text: "What type of activities do you enjoy?",
            type: "choice",
            options: [
                { text: "Solving problems and puzzles", weights: { engineering: 40, commerce: 20 } },
                { text: "Helping others and caring", weights: { medical: 40, humanities: 20 } },
                { text: "Drawing and designing", weights: { creative: 50 } },
                { text: "Working with hands", weights: { vocational: 50 } }
            ]
        },
        {
            id: 6,
            text: "What kind of work environment do you prefer?",
            type: "choice",
            options: [
                { text: "Office or laboratory", weights: { engineering: 30, medical: 20, commerce: 30 } },
                { text: "Creative studio", weights: { creative: 40 } },
                { text: "Field or workshop", weights: { vocational: 40, medical: 20 } },
                { text: "Varied locations", weights: { humanities: 30, creative: 20 } }
            ]
        },
        {
            id: 7,
            text: "What are your future goals?",
            type: "choice",
            options: [
                { text: "Build innovative technology", weights: { engineering: 50 } },
                { text: "Help people directly", weights: { medical: 50 } },
                { text: "Start a business", weights: { commerce: 50 } },
                { text: "Create art or design", weights: { creative: 50 } },
                { text: "Master a skilled trade", weights: { vocational: 50 } }
            ]
        },
        {
            id: 8,
            text: "How do you prefer to learn?",
            type: "choice",
            options: [
                { text: "Through theory and calculations", weights: { engineering: 30, commerce: 30 } },
                { text: "Through experiments and observation", weights: { medical: 40, engineering: 20 } },
                { text: "Through discussion and reading", weights: { humanities: 40, commerce: 20 } },
                { text: "Through hands-on practice", weights: { vocational: 50, creative: 20 } }
            ]
        }
    ];

    // ==================== APP STATE ====================
    let currentQuestion = 0;
    let answers = {};
    let scores = {
        engineering: 0,
        medical: 0,
        commerce: 0,
        humanities: 0,
        creative: 0,
        vocational: 0
    };
    let timerInterval = null;
    let timeLeft = 600; // 10 minutes in seconds
    let topCareer = null;

    // ==================== DOM ELEMENTS ====================
    const welcomeScreen = document.getElementById('welcome');
    const assessmentScreen = document.getElementById('assessment');
    const loadingScreen = document.getElementById('loading');
    const resultsScreen = document.getElementById('results');
    const questionContainer = document.getElementById('questionContainer');
    const progressBar = document.getElementById('progress');
    const counter = document.getElementById('counter');
    const section = document.getElementById('section');
    const timer = document.getElementById('timer');
    const timeDisplay = document.getElementById('time');

    // ==================== INITIALIZE ====================
    function init() {
        // Setup event listeners
        document.getElementById('startBtn').addEventListener('click', startAssessment);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('retakeBtn').addEventListener('click', () => location.reload());
        document.getElementById('printBtn').addEventListener('click', () => window.print());
        
        // Chatbot
        document.getElementById('chatToggle').addEventListener('click', toggleChat);
        document.getElementById('chatClose').addEventListener('click', toggleChat);
        document.getElementById('chatSend').addEventListener('click', sendChat);
        document.getElementById('chatInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendChat();
        });
        
        // Initialize first question if needed
        if (currentQuestion === 0) {
            renderQuestion();
        }
    }

    // ==================== ASSESSMENT FUNCTIONS ====================
    function startAssessment() {
        welcomeScreen.classList.add('hidden');
        assessmentScreen.classList.remove('hidden');
        timer.style.display = 'block';
        startTimer();
        renderQuestion();
    }

    function startTimer() {
        timerInterval = setInterval(() => {
            timeLeft--;
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timeDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                finishAssessment();
            }
        }, 1000);
    }

    function renderQuestion() {
        const question = questions[currentQuestion];
        
        // Update progress
        const progress = ((currentQuestion + 1) / questions.length) * 100;
        progressBar.style.width = `${progress}%`;
        counter.textContent = `Question ${currentQuestion + 1}/${questions.length}`;
        section.textContent = currentQuestion < 3 ? 'SECTION 1: ACADEMICS' : 
                              currentQuestion < 5 ? 'SECTION 2: INTERESTS' : 
                              'SECTION 3: PREFERENCES';
        
        // Render question
        let html = `<div class="question-card">
            <div class="question-text">${question.text}</div>`;
        
        if (question.type === 'slider') {
            html += `<div class="slider-container">
                <div class="slider-value" id="sliderValue${question.id}">${question.value}%</div>
                <input type="range" min="${question.min}" max="${question.max}" value="${question.value}" 
                       class="slider" id="slider${question.id}">
                <div class="slider-labels">
                    <span>Low</span>
                    <span>High</span>
                </div>
            </div>`;
            
            // Save default answer
            if (!answers[question.id]) {
                answers[question.id] = {
                    value: question.value,
                    weights: question.weights
                };
            }
        } else {
            html += `<div class="options-grid">`;
            question.options.forEach((option, index) => {
                const isSelected = answers[question.id] && answers[question.id].optionIndex === index;
                html += `<div class="option ${isSelected ? 'selected' : ''}" data-index="${index}">
                    <div class="option-circle">${isSelected ? '✓' : ''}</div>
                    ${option.text}
                </div>`;
            });
            html += `</div>`;
        }
        
        html += `</div>`;
        questionContainer.innerHTML = html;
        
        // Add event listeners
        if (question.type === 'slider') {
            const slider = document.getElementById(`slider${question.id}`);
            const valueDisplay = document.getElementById(`sliderValue${question.id}`);
            
            slider.addEventListener('input', (e) => {
                const value = e.target.value;
                valueDisplay.textContent = `${value}%`;
                answers[question.id] = {
                    value: parseInt(value),
                    weights: question.weights
                };
            });
        } else {
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.addEventListener('click', () => {
                    // Remove selection from all options
                    options.forEach(opt => {
                        opt.classList.remove('selected');
                        opt.querySelector('.option-circle').textContent = '';
                    });
                    
                    // Select clicked option
                    option.classList.add('selected');
                    option.querySelector('.option-circle').textContent = '✓';
                    
                    const index = parseInt(option.dataset.index);
                    answers[question.id] = {
                        optionIndex: index,
                        weights: question.options[index].weights
                    };
                });
            });
        }
        
        // Update navigation buttons
        document.getElementById('prevBtn').disabled = currentQuestion === 0;
        document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? 
            'Finish Assessment' : 'Next Question';
    }

    function prevQuestion() {
        if (currentQuestion > 0) {
            currentQuestion--;
            renderQuestion();
        }
    }

    function nextQuestion() {
        const question = questions[currentQuestion];
        
        // Validate answer
        if (!answers[question.id]) {
            alert('Please select an answer before continuing.');
            return;
        }
        
        if (currentQuestion < questions.length - 1) {
            currentQuestion++;
            renderQuestion();
        } else {
            finishAssessment();
        }
    }

    function finishAssessment() {
        clearInterval(timerInterval);
        timer.style.display = 'none';
        assessmentScreen.classList.add('hidden');
        loadingScreen.classList.remove('hidden');
        
        // Calculate scores
        calculateScores();
        
        // Show loading animation
        let steps = [
            "Analyzing academic performance...",
            "Evaluating interests...",
            "Matching with career paths...",
            "Generating recommendations..."
        ];
        
        let currentStep = 0;
        const loadingText = document.getElementById('loadingText');
        const loadingBar = document.getElementById('loadingBar');
        
        const interval = setInterval(() => {
            loadingText.textContent = steps[currentStep];
            loadingBar.style.width = `${((currentStep + 1) / steps.length) * 100}%`;
            
            currentStep++;
            if (currentStep >= steps.length) {
                clearInterval(interval);
                setTimeout(showResults, 500);
            }
        }, 800);
    }

    function calculateScores() {
        // Reset scores
        scores = {
            engineering: 0,
            medical: 0,
            commerce: 0,
            humanities: 0,
            creative: 0,
            vocational: 0
        };
        
        // Calculate weighted scores
        Object.values(answers).forEach(answer => {
            if (answer.value !== undefined) {
                // Slider answer
                const multiplier = answer.value / 100;
                for (const [career, weight] of Object.entries(answer.weights)) {
                    scores[career] += weight * multiplier;
                }
            } else {
                // Choice answer
                for (const [career, weight] of Object.entries(answer.weights)) {
                    scores[career] += weight;
                }
            }
        });
        
        // Find top career
        const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
        topCareer = sorted[0][0];
    }

    function showResults() {
        loadingScreen.classList.add('hidden');
        resultsScreen.classList.remove('hidden');
        
        const career = careerData[topCareer];
        
        // Update main result
        document.getElementById('resultTitle').textContent = career.name;
        document.getElementById('resultDesc').textContent = career.desc;
        document.getElementById('resultIcon').innerHTML = `<i class="${career.icon}"></i>`;
        
        // Update tags
        let tagsHtml = `<div class="badge">${career.stream}</div>`;
        career.exams.forEach(exam => {
            tagsHtml += `<div class="badge">${exam}</div>`;
        });
        document.getElementById('resultTags').innerHTML = tagsHtml;
        
        // Create roadmap
        const roadmapHtml = `
            <div class="roadmap-step">
                <div class="step-title">Class 11 & 12</div>
                <div class="step-desc">Choose ${career.stream} stream. Focus on building strong basics.</div>
            </div>
            <div class="roadmap-step">
                <div class="step-title">Entrance Preparation</div>
                <div class="step-desc">Start preparing for ${career.exams.slice(0, 2).join(' and ')} exams.</div>
            </div>
            <div class="roadmap-step">
                <div class="step-title">College Selection</div>
                <div class="step-desc">Research colleges like ${career.colleges.slice(0, 2).join(', ')}.</div>
            </div>
            <div class="roadmap-step">
                <div class="step-title">Career Development</div>
                <div class="step-desc">Gain practical skills through internships and projects.</div>
            </div>
        `;
        document.getElementById('roadmap').innerHTML = roadmapHtml;
        
        // Show alternatives (top 3 after main)
        const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
        let alternativesHtml = '';
        
        for (let i = 1; i <= 3 && i < sortedScores.length; i++) {
            const [careerKey, score] = sortedScores[i];
            const altCareer = careerData[careerKey];
            const percentage = Math.round((score / sortedScores[0][1]) * 100);
            
            alternativesHtml += `
                <div class="result-card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <strong>${altCareer.name}</strong>
                        <span style="font-size: 0.9rem; color: #2563eb; background: #e0e7ff; padding: 2px 10px; border-radius: 10px;">
                            ${percentage}% match
                        </span>
                    </div>
                    <p style="font-size: 0.85rem; color: #64748b;">${altCareer.stream}</p>
                </div>
            `;
        }
        
        document.getElementById('alternatives').innerHTML = alternativesHtml;
        
        // Create chart
        createChart();
    }

    function createChart() {
        const ctx = document.getElementById('chart').getContext('2d');
        const labels = Object.keys(scores).map(key => {
            const names = {
                'engineering': 'Engineering',
                'medical': 'Medical',
                'commerce': 'Commerce',
                'humanities': 'Humanities',
                'creative': 'Creative',
                'vocational': 'Vocational'
            };
            return names[key];
        });
        
        const maxScore = Math.max(...Object.values(scores));
        const data = Object.values(scores).map(score => (score / maxScore) * 100);
        
        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Match Score',
                    data: data,
                    backgroundColor: 'rgba(37, 99, 235, 0.2)',
                    borderColor: '#2563eb',
                    pointBackgroundColor: '#2563eb'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    }

    // ==================== CHATBOT FUNCTIONS ====================
    function toggleChat() {
        const chatWindow = document.getElementById('chatWindow');
        const isVisible = chatWindow.style.display === 'flex';
        chatWindow.style.display = isVisible ? 'none' : 'flex';
        
        if (!isVisible) {
            setTimeout(() => {
                document.getElementById('chatInput').focus();
            }, 100);
        }
    }

    function sendChat() {
        const input = document.getElementById('chatInput');
        const message = input.value.trim();
        
        if (!message) return;
        
        // Add user message
        addMessage(message, 'user');
        input.value = '';
        
        // Generate bot response
        setTimeout(() => {
            let response = "I can help you understand different career paths. What would you like to know?";
            
            if (message.toLowerCase().includes('engineering')) {
                response = "Engineering requires strong Mathematics and Physics. Popular branches: Computer Science, Mechanical, Civil, Electrical. Exams: JEE Main & Advanced.";
            } else if (message.toLowerCase().includes('medical')) {
                response = "Medical field requires Biology, Physics, Chemistry. Main exam: NEET. Careers: Doctor, Dentist, Pharmacist, Physiotherapist.";
            } else if (message.toLowerCase().includes('commerce')) {
                response = "Commerce focuses on business, accounting, economics. Stream: Commerce with Maths or without. Careers: CA, MBA, Finance, Business.";
            } else if (message.toLowerCase().includes('stream')) {
                response = "After 10th, main streams are: Science (MPC/BiPC), Commerce, Humanities, and Vocational courses. Choose based on interests and strengths.";
            } else if (topCareer) {
                const career = careerData[topCareer];
                if (message.toLowerCase().includes('why')) {
                    response = `Based on your answers, ${career.desc}`;
                } else if (message.toLowerCase().includes('college')) {
                    response = `For ${career.name}, consider colleges like ${career.colleges.slice(0, 3).join(', ')}.`;
                } else if (message.toLowerCase().includes('exam')) {
                    response = `Important exams: ${career.exams.join(', ')}. Start preparation early.`;
                }
            }
            
            addMessage(response, 'bot');
        }, 500);
    }

    function addMessage(text, sender) {
        const chatBody = document.getElementById('chatBody');
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}-message`;
        messageDiv.textContent = text;
        chatBody.appendChild(messageDiv);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    // ==================== START APP ====================
    document.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
